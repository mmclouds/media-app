# assets-manager Specification

## Purpose
TBD - created by archiving change add-assets-manager. Update Purpose after archive.
## 需求
### 需求：资产管理功能
用户必须能够通过点击 Assets 按钮打开资产管理弹窗，浏览和管理已生成的多媒体资产。

> **接口说明**：本功能复用现有 `/api/media/feed` 接口，不新增后台 API。

#### 场景：打开资产管理弹窗
- **当** 用户点击 MediaGeneratorResultPane 中的 Assets 按钮
- **那么** 系统显示资产管理弹窗
- **并且** 弹窗默认展示视频类型资产
- **并且** 调用 `GET /api/media/feed?mediaTypes=VIDEO` 获取数据

#### 场景：关闭资产管理弹窗
- **当** 用户点击弹窗关闭按钮或点击弹窗外部区域
- **那么** 系统关闭资产管理弹窗

### 需求：媒体类型筛选
用户必须能够按媒体类型筛选资产列表。

#### 场景：切换到视频类型
- **当** 用户点击 "Videos" 标签
- **那么** 系统调用 `GET /api/media/feed?mediaTypes=VIDEO`
- **并且** 清空之前的资产列表并显示视频资产

#### 场景：切换到图片类型
- **当** 用户点击 "Images" 标签
- **那么** 系统调用 `GET /api/media/feed?mediaTypes=IMAGE`
- **并且** 清空之前的资产列表并显示图片资产

#### 场景：切换到音频类型
- **当** 用户点击 "Audio" 标签
- **那么** 系统调用 `GET /api/media/feed?mediaTypes=AUDIO`
- **并且** 清空之前的资产列表并显示音频资产

### 需求：资产列表分页加载
系统必须支持游标分页加载资产列表，避免一次加载过多数据。

> **接口复用**：使用 `/api/media/feed` 的 `cursor` 和 `limit` 参数实现分页。

#### 场景：初始加载
- **当** 弹窗打开时
- **那么** 系统调用 `GET /api/media/feed?mediaTypes=VIDEO&limit=20`
- **并且** 显示加载状态

#### 场景：滚动加载更多
- **当** 用户滚动到列表底部
- **并且** 存在更多数据（hasMore=true）
- **那么** 系统调用 `GET /api/media/feed?mediaTypes=VIDEO&limit=20&cursor=<nextCursor>`
- **并且** 将新资产追加到现有列表

#### 场景：无更多数据
- **当** 用户滚动到列表底部
- **并且** 不存在更多数据（hasMore=false）
- **那么** 系统显示 "已加载全部" 提示

### 需求：资产列表虚拟滚动
系统必须使用虚拟滚动优化大量数据的渲染性能。

#### 场景：仅渲染可视区域
- **当** 资产数量超过 12 条
- **那么** 系统仅渲染可视区域及缓冲区的资产卡片
- **并且** 使用占位高度维持滚动条位置

#### 场景：滚动时更新渲染范围
- **当** 用户滚动资产列表
- **那么** 系统动态计算并更新渲染范围
- **并且** 保持滚动流畅

### 需求：资产卡片展示
系统必须以网格布局展示资产卡片，显示关键信息。

#### 场景：视频资产卡片
- **当** 展示视频类型资产
- **那么** 卡片显示视频封面图
- **并且** 显示模型名称
- **并且** 显示生成时间
- **并且** 悬停时显示播放预览

#### 场景：图片资产卡片
- **当** 展示图片类型资产
- **那么** 卡片显示图片缩略图
- **并且** 显示模型名称
- **并且** 显示生成时间
- **并且** 支持图片懒加载

#### 场景：音频资产卡片
- **当** 展示音频类型资产
- **那么** 卡片显示音频图标或波形图
- **并且** 显示模型名称
- **并且** 显示生成时间
- **并且** 显示音频时长

### 需求：空状态提示
系统必须在无资产时显示友好的空状态提示。

#### 场景：无视频资产
- **当** 用户选择视频类型
- **并且** 接口返回空数组
- **那么** 系统显示空状态提示 "No videos yet"

#### 场景：无图片资产
- **当** 用户选择图片类型
- **并且** 接口返回空数组
- **那么** 系统显示空状态提示 "No images yet"

#### 场景：无音频资产
- **当** 用户选择音频类型
- **并且** 接口返回空数组
- **那么** 系统显示空状态提示 "No audio yet"

### 需求：未登录状态处理
系统必须在用户未登录时显示登录提示。

#### 场景：未登录用户打开弹窗
- **当** 未登录用户点击 Assets 按钮
- **那么** 弹窗显示登录提示
- **并且** 不调用接口加载资产列表

### 需求：加载错误处理
系统必须在加载失败时显示错误提示并提供重试选项。

#### 场景：加载失败
- **当** `/api/media/feed` 接口返回错误
- **那么** 系统显示错误提示
- **并且** 提供 "Try again" 重试按钮

#### 场景：重试加载
- **当** 用户点击重试按钮
- **那么** 系统重新调用接口加载资产列表

